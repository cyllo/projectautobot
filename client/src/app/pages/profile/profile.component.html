<div *ngIf="searching | async; then loadingProfile; else displayProfileBlock"></div>

<ng-template #displayProfileBlock>
  <div class="profile flex-layout px-3 pt-3" fxLayout="row" *ngIf="displayProfile | async as playerData;">

  <div *ngIf="selectedSnapshotData | async as snapshotStats;">

    <div class="flex-layout" fxLayout="column" fxFlex="grow">

      <div class="profile-header flex-layout px-3"
           fxLayout="row"
           fxLayoutGap.gt-sm="30px"
           fxFlex="noshrink"
           fxLayoutWrap
           *ngIf="playerData">

        <div class="flex-layout" fxLayout="column" fxFlex.lt-md="100%" fxFlex.gt-sm="initial">
           <ow-platform-region
            [player]="playerData"
            [players]="players | async"
            (change)="changePlatformRegion($event)">
          </ow-platform-region> 
        </div><!-- end column -->

        <div class="flex-layout" fxLayout="column" fxFlex.lt-md="100%" fxFlex.gt-sm="initial">
          <div ngStyle.gt-sm="padding-top: 22px;">
            <ow-quick-comp-toggle (change)="toggleSnapshotStats($event)"></ow-quick-comp-toggle>
          </div>
        </div><!-- end column -->

      </div><!-- end .profile-header -->

      <div class="profile-body flex-layout"
           fxLayout="row"
           fxFlex="noshrink"
           fxLayoutWrap
           *ngIf="playerData && selectedSnapshotData">

        <div class="flex-layout" fxLayout="column" fxFlex.lt-lg="100%" fxFlex.gt-md="25%">
          <div class="flex-layout" fxLayout="row"
               fxLayoutAlign.lt-lg="start center"
               fxLayoutAlign.gt-md="start start"
               fxFlex="noshrink" fxLayoutWrap>

            <div class="flex-layout px-3 pt-3" fxLayout="column" fxFlex.lt-md="100%" fxFlex.md="50%" fxFlex.lg="100%">
                 <ow-profile-overview [player]="playerData"></ow-profile-overview>   
            </div><!-- end column -->

            <div class="flex-layout px-3 pt-3" fxLayout="column" fxFlex.lt-md="100%" fxFlex.md="50%" fxFlex.lg="100%">
                <ow-skill-rating-trend></ow-skill-rating-trend>  
            </div><!-- end column -->

          </div><!-- end row -->
        </div><!-- end column -->

        <div class="flex-layout pt-3" fxLayout="column" fxFlex.lt-lg="100%" fxFlex.gt-md="75%">

            <ow-profile-page-tabs [snapshotStats]="snapshotStats"></ow-profile-page-tabs>  

        </div>

      </div><!-- end .profile-body -->

    </div><!-- end column -->
  </div><!-- end .profile -->
  </div>
</ng-template>
<ng-template #loadingProfile>
   <ow-page-spinner></ow-page-spinner> 
</ng-template>
