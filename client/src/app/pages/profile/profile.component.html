<div
  class="profile flex-layout px-3"
  fxLayout="column"
  fxLayoutGap="14px"
  fxFlex
  *ngIf="displayProfile | async as currentProfile; else loadingBlock">

  <div class="flex-layout" fxLayout="row" fxLayoutAlign="start center" fxFlex="noshrink">

    <div class="flex-layout" fxLayout="column" fxFlex>

      <div class="flex-layout" fxLayout="row" fxLayoutAlign="start center" fxLayoutWrap>
        <div class="flex-layout pt-3 px-3"
             fxLayout="column"
             fxFlex="initial"
             fxFlex.lt-md="grow">
          <ow-platform-region [players]="players" [currentProfile]="currentProfile" (change)="changeProfile$.next($event)"></ow-platform-region>
        </div><!-- end col -->
        <div class="flex-layout pt-3 px-3"
             fxLayout="column"
             fxFlex="initial"
             fxFlex.lt-md="grow">
          <ow-game-mode-toggle (gameMode)="selectedGameMode$.next($event)" [modeIndicator]="modeIndicator"></ow-game-mode-toggle>
        </div><!-- end col -->
        <div class="flex-layout pt-3 px-3" fxLayout="column" fxFlex fxFlex.lt-lg="grow">
          <div class="flex-layout"
               fxLayout="row"
               fxLayoutAlign="end center"
               fxLayoutAlign.lt-lg="start center"
               fxLayoutGap="14px"
               fxFlex="noshrink">
            <div class="flex-layout" fxLayout="column" fxFlex="initial">
              <button md-button fxLayoutAlign="center center" (click)="reScrapeProfile$.next()">
                <md-icon class="md-18 mr-1">refresh</md-icon>
                <span class="mat-caption text-uppercase">Renew</span>
              </button>
            </div><!-- end column -->
            <div class="flex-layout" fxLayout="column" fxFlex="initial">
              <button md-button fxLayoutAlign="center center">
                <md-icon class="md-18 mr-1">share</md-icon>
                <span class="mat-caption text-uppercase">Share</span>
              </button>
            </div><!-- end column -->
            <div class="flex-layout" fxLayout="column" fxFlex="initial">
              <button md-button fxLayoutAlign="center center">
                <md-icon class="md-18 mr-1">link</md-icon>
                <span class="mat-caption text-uppercase">Claim with Battle.net</span>
              </button>
            </div><!-- end column -->
          </div><!-- end row -->
        </div><!-- end col -->
      </div>

      <div class="flex-layout" fxLayout="row">
        <div class="flex-layout" fxLayout="column" fxFlex>
          <ow-profile-header [profile]="currentProfile" [modeIndicator]="modeIndicator | async"></ow-profile-header>
        </div>
      </div>

    </div>

  </div><!-- end row -->

  <div class="flex-layout" fxLayout="row" fxFlex="noshrink">

    <div class="flex-layout" fxLayout="column" fxFlex>
      <md-tab-group [(selectedIndex)]="selectedTabIndex">
        <md-tab label="Overview">
          <ow-profile-overview [profile]="currentProfile" [modeIndicator]="modeIndicator | async"></ow-profile-overview>
        </md-tab>
        <md-tab label="Heroes">
          <div class="flex-layout py-3" fxLayout="row" fxLayoutGap="14px">
            <div class="flex-layout py-3" fxLayout="column" fxFlex>
              <ow-heroes-table></ow-heroes-table>
            </div>
          </div>
        </md-tab>
        <md-tab label="Trends">
          <div class="flex-layout py-3" fxLayout="row" fxLayoutGap="14px">
            <div class="flex-layout py-3" fxLayout="column" fxFlex>
              Trends
            </div>
          </div>
        </md-tab>
        <md-tab label="Snapshots">
          <div class="flex-layout py-3" fxLayout="row" fxLayoutGap="14px">
            <div class="flex-layout py-3" fxLayout="column" fxFlex>
              <ow-snapshots-history *ngIf="selectedTabIndex == 3"></ow-snapshots-history>
            </div>
          </div>
        </md-tab>
      </md-tab-group>
    </div>

  </div><!-- end row -->

</div><!-- end .profile -->

<ng-template #loadingBlock>
  <ow-page-spinner></ow-page-spinner>
</ng-template>