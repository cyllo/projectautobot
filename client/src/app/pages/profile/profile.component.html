<div class="profile px-3" fxLayout="column" fxLayoutGap="14px" fxFlex *ngIf="displayProfile | async as currentProfile; else loadingBlock">

  <div [ngStyle.gt-sm]="{ 'padding-top': '20px' }" fxLayout="row" fxLayoutAlign="start center" fxLayoutGap="14px" fxLayoutWrap>

    <div class="mt-3" fxLayout="column" fxFlex="initial" fxFlex.lt-md="grow" fxFlexOrder.lt-md="2">
      <ow-platform-region
        [ngStyle.lt-md]="{ 'padding-top': '20px' }"
        [players]="players"
        [currentProfile]="currentProfile"
        (change)="changeProfile$.next($event)">
      </ow-platform-region>
    </div>

    <div class="mt-3" fxLayout="column" fxLayoutAlign.lt-md="start start" fxFlex="initial" fxFlex.lt-md="grow" fxFlexOrder.lt-md="1">
      <ow-game-mode-toggle
        (gameMode)="selectedGameMode$.next($event)"
        [modeIndicator]="modeIndicator">
      </ow-game-mode-toggle>
    </div>

    <div class="mt-3" fxLayout="column" fxFlex fxFlex.lt-md="grow" fxFlexOrder.lt-md="3">
      <div fxLayout="row" fxLayoutAlign.gt-md="end center" fxLayoutGap="14px">
        <button md-button (click)="reScrapeProfile$.next()">
          <md-icon>refresh</md-icon>
          <span class="text-uppercase">Renew</span>
        </button>
        <button md-button>
          <md-icon>share</md-icon>
          <span class="text-uppercase">Share</span>
        </button>
        <button class="battle-net" md-button>
          <md-icon>link</md-icon>
          <span class="text-uppercase">Claim with Battle.net</span>
        </button>
      </div>
    </div>

    <div fxLayout="column" fxFlex="grow" fxFlexOrder.lt-md="4">
      <div fxLayout="row">
        <ow-profile-career [profile]="currentProfile" [modeIndicator]="modeIndicator | async" fxFill></ow-profile-career>
      </div>
    </div>

  </div>

  <div fxLayout="row">
    <md-tab-group [(selectedIndex)]="selectedTabIndex" fxFlex>
      <md-tab label="Overview">
        <div class="py-3 px-3" fxLayout="column" fxFlex>
          <ow-profile-overview
            [profile]="currentProfile"
            [modeIndicator]="modeIndicator">
          </ow-profile-overview>
        </div>
      </md-tab>
      <md-tab label="Heroes">
        <div class="py-3 px-3" fxLayout="column" fxFlex>
          <ow-profile-heroes></ow-profile-heroes>
        </div>
      </md-tab>
      <md-tab label="Trends">
        <div class="py-3 px-3" fxLayout="column" fxFlex>
          trends
        </div>
      </md-tab>
      <md-tab label="Snapshots">
        <div class="py-3 px-3" fxLayout="column" fxFlex *ngIf="selectedTabIndex == 3">
          <ow-snapshots-history
            [snapshots]="snapshots"
            [modeIndicator]="modeIndicator">
          </ow-snapshots-history>
        </div>
      </md-tab>
    </md-tab-group>
  </div>

</div>

<ng-template #loadingBlock>
  <ow-page-spinner></ow-page-spinner>
</ng-template>
